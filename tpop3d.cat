


TPOP3D(8)                                               TPOP3D(8)


NNAAMMEE
       tpop3d - small, fast, extensible POP3 server

SSYYNNOOPPSSIISS
       ttppoopp33dd [ --dd ] [ --ff _f_i_l_e ]

DDEESSCCRRIIPPTTIIOONN
       ttppoopp33dd  is a server which implements the RFC1939 POP3 pro-
       tocol, including UIDL support. Most options are set via  a
       configuration  file, typically //eettcc//ttppoopp33dd..ccoonnff. ttppoopp33dd is
       a daemon which waits in the background and accepts  incom-
       ing connections. It _c_a_n_n_o_t be operated from iinneettdd(8).

       ttppoopp33dd logs most diagnostics via ssyysslloogg(3), using facility
       mmaaiill.


   OOPPTTIIOONNSS
       --hh     Print a brief usage summary.


       --ff _f_i_l_e
              Read  configuration  from  _f_i_l_e,  instead  of  from
              //eettcc//ttppoopp33dd.


       --dd     Do  not  fork to become a daemon, but stay attached
              to a controlling terminal and print log messages to
              standard error as well as the syslog


       --vv     Log  traffic  being  sent  to/from  the server, for
              debugging purposes; tpop3d will  log  commands  and
              responses  sent,  but  not  passwords or the actual
              content of messages.


CCOONNFFIIGGUURRAATTIIOONN FFIILLEE
       The configuration file, //eettcc//ttppoopp33dd..ccoonnff,  consists  of  a
       number  of  _k_e_y: _v_a_l_u_e  pairs.  Blank  lines  and comments
       introduced by `#' are ignored.

       Presently-recognised configuration directives are:


   GGlloobbaall ooppttiioonnss
       lliisstteenn--aaddddrreessss: (_h_o_s_t_n_a_m_e | _I_P _n_u_m_b_e_r)[:_p_o_r_t][(_d_o_m_a_i_n) ...
              The  ports and addresses on which the daemon should
              listen for incoming connections. If any _p_o_r_t is not
              specified,  it  is  assumed  to  be ppoopp--33 (110). If
              _d_o_m_a_i_n is not specified, it is assumed  to  be  the
              section  of  the  name  associated  with  the given
              address after the first `.', or, if  no  such  name
              can  be  established, the nodename of the system as



                                                                1





TPOP3D(8)                                               TPOP3D(8)


              determined by uunnaammee(2).

              To listen for connections on any interface and  the
              default port, the directive

              listen-address: 0.0.0.0

              is sufficient. There is no default for this option.


       mmaaxx--cchhiillddrreenn: _n_u_m_b_e_r
              The maximum number of child processes which may  be
              actively  serving  connections  at  any given time.
              Consists of a single number.


       aappppeenndd--ddoommaaiinn: (yyeess|ttrruuee)
              If authentication does  not  succeed  for  a  given
              _u_s_e_r_n_a_m_e,  retry with _u_s_e_r_n_a_m_e@_d_o_m_a_i_n, where _d_o_m_a_i_n
              is the domain name associated with the  address  on
              which the connection was received. This is intended
              to be  used  where  multiple  virtual  domains  are
              served  from  multiple  IP  addresses.  This option
              only takes effect when _u_s_e_r_n_a_m_e does not contain  a
              separator, which may be `@', `%' or `!'.



   PPAAMM aauutthheennttiiccaattiioonn ooppttiioonnss
       aauutthh--ppaamm--eennaabbllee: (yyeess|ttrruuee)
              Enable  authentication  using Pluggable Authentica-
              tion Modules.


       aauutthh--ppaamm--ffaacciilliittyy: _f_a_c_i_l_i_t_y
              Sets the PAM facility name used by ttppoopp33dd to _f_a_c_i_l_-
              _i_t_y. Defaults to ttppoopp33dd.


       aauutthh--ppaamm--mmaaiillssppooooll--ddiirr: _p_a_t_h
              Sets  the  path  where mailspools for PAM users are
              located. Defaults to //vvaarr//ssppooooll//mmaaiill.


       aauutthh--ppaamm--mmaaiill--ggrroouupp: (_g_r_o_u_p_-_n_a_m_e | _g_i_d)
              The group name or gid under  which  access  to  the
              mailspool  will  take  place.  The default for this
              option is the primary group  of  the  authenticated
              user,  which  will probably not work. You will nor-
              mally want to set this to `mail'.







                                                                2





TPOP3D(8)                                               TPOP3D(8)


   PPaasssswwdd aauutthheennttiiccaattiioonn ooppttiioonnss
       These are only  available  if  you  compiled  tpop3d  with
       aauutthh__ppaasssswwdd support.


       aauutthh--ppaasssswwdd--eennaabbllee: (yyeess|ttrruuee)
              Enable   authentication   using   /etc/passwd  (and
              /etc/shadow, if this option was selected at compile
              time).


       aauutthh--ppaasssswwdd--mmaaiillssppooooll--ddiirr: _p_a_t_h
              Sets  the  path where mailspools for Unix users are
              located. Defaults to //vvaarr//ssppooooll//mmaaiill.


       aauutthh--ppaasssswwdd--mmaaiill--ggrroouupp: (_g_r_o_u_p_-_n_a_m_e | _g_i_d)
              The group name or gid under  which  access  to  the
              mailspool  will  take  place.  The default for this
              option is the primary group  of  the  authenticated
              user,  which  will probably not work. You will nor-
              mally want to set this to `mail'.



   MMyySSQQLL aauutthheennttiiccaattiioonn ooppttiioonnss
       These are only  available  if  you  compiled  tpop3d  with
       aauutthh__mmyyssqqll support.


       aauutthh--mmyyssqqll--eennaabbllee: (yyeess | ttrruuee)
              `yes' or `true' to enable MySQL authentication.


       aauutthh--mmyyssqqll--mmaaiill--ggrroouupp: (_g_r_o_u_p_-_n_a_m_e | _g_i_d)
              The  group  name  or  gid under which access to the
              mailspool will take place.  The  default  for  this
              option  is the primary group of the UNIX user asso-
              ciated with the virtual domain.


       aauutthh--mmyyssqqll--hhoossttnnaammee_: _h_o_s_t_n_a_m_e
              Host on which  to  connect  to  MySQL,  by  default
              llooccaallhhoosstt.


       aauutthh--mmyyssqqll--ddaattaabbaassee: _d_a_t_a_b_a_s_e
              MySQL database to use for authentication.


       aauutthh--mmyyssqqll--uusseerrnnaammee: _u_s_e_r_n_a_m_e
              MySQL username used to access the database.





                                                                3





TPOP3D(8)                                               TPOP3D(8)


       aauutthh--mmyyssqqll--ppaasssswwoorrdd: _p_a_s_s_w_o_r_d
              Password of MySQL user.


   AA nnoottee oonn MMyySSQQLL aauutthheennttiiccaattiioonn
       The  MySQL  authentication  scheme  is intended to be used
       with the vmail-sql virtual domains configuration described
       at

       _h_t_t_p_:_/_/_w_w_w_._e_x_-_p_a_r_r_o_t_._c_o_m_/_~_c_h_r_i_s_/_v_m_a_i_l_-_s_q_l_/

       However,  it would be extremely simple to adjust it to use
       another database schema, should this be required. The code
       is all contained in auth_mysql.c in the distribution.

       Note  that  the username and password supplied in the con-
       figuration file are privileged information, in  the  sense
       that they would allow an arbitrary person to obtain infor-
       mation from the  database  if  they  have  access  to  the
       machine  on which it resides. _t_p_o_p_3_d clears this data from
       memory when the MySQL authentication code  is  initialised
       (though  note  that if you leave the aauutthh--mmyyssqqll--...... direc-
       tives in place but remove the aauutthh--mmyyssqqll--eennaabbllee:: yyeess line,
       then  this  will not occur). The corollary to this is that
       the ttppoopp33dd..ccoonnff file should not be readable  by  arbitrary
       users.


BBUUGGSS
       Locking  of  mailspools  under Unix is problematic, mostly
       becuase of past  brokenness  which  has  now  been  fixed.
       ttppoopp33dd's  locking scheme should suffice in most cases (and
       should work reliably over NFS) but it is naive:  it  locks
       the  mailspool for exclusive access, so that an MTA cannot
       deliver mail to the mailspool whilst it is being  accessed
       by a ttppoopp33dd user. As a result, it is configured by default
       to time out users rather rapidly (after  30s  of  inactiv-
       ity). This is one of several places where it is marginally
       noncompliant with RFC1939.


FFIILLEESS
       //eettcc//ttppoopp33dd..ccoonnff


SSEEEE AALLSSOO
       eexxiimm(8), iinneettdd(8), ssyysslloogg(3), mmyyssqqll(1), RRFFCC11993399,,
       _h_t_t_p_:_/_/_w_w_w_._e_x_-_p_a_r_r_o_t_._c_o_m_/_~_c_h_r_i_s_/_t_p_o_p_3_d_/,
       _h_t_t_p_:_/_/_w_w_w_._e_x_-_p_a_r_r_o_t_._c_o_m_/_~_c_h_r_i_s_/_v_m_a_i_l_-_s_q_l_/,
       _h_t_t_p_:_/_/_w_w_w_._m_y_s_q_l_._c_o_m_/,


AAUUTTHHOORR
       Chris Lightfoot <chris@ex-parrot.com>



                                                                4





TPOP3D(8)                                               TPOP3D(8)


CCOOPPYYIINNGG
       This program is free software;  you  can  redistribute  it
       and/or modify it under the terms of the GNU General Public
       License as published  by  the  Free  Software  Foundation;
       either  version  2 of the License, or (at your option) any
       later version.

       This program is distributed in the hope that  it  will  be
       useful, but WITHOUT ANY WARRANTY; without even the implied
       warranty of MERCHANTABILITY or FITNESS  FOR  A  PARTICULAR
       PURPOSE.  See  the  GNU  General  Public  License for more
       details.

       You should have received a copy of the GNU General  Public
       License along with this program; if not, write to the Free
       Software Foundation, Inc., 675  Mass  Ave,  Cambridge,  MA
       02139, USA.








































                                                                5


