Changes for tpop3d
$Id$

1.4.1

Hooks for POP-before-SMTP relaying support were implemented.

The facility as which tpop3d logs messages may now be changed from the
configuration file.

A serious bug in TPOP3D::AuthDriver which affected operation under
auth-other was corrected.

Fixed the behaviour of STAT after DELE.

UIDs in maildir mailboxes are now generated by an MD5 hash of the file name,
fixing a uniqueness problem in previous versions. This means that this version
of tpop3d will display different UIDs by comparison with old versions. See the
comment in the maildir_make_indexpoint function in maildir.c, and also the
archived mailing list posting at
  http://lists.beasts.org/pipermail/tpop3d-discuss/2001-November/000308.html
for more information, or if you want to use the old scheme regardless (not
recommended). In addition, tpop3d now marks messages in maildirs as `seen',
using the `:2,S' filename suffix, rather than just moving them to cur/.

Made logging of failed authentication attempts more informative, following a
suggestion by Jens Liebchen.

1.3.5

A bug in the log printing code which caused trouble on some architectures was
fixed. A bug in the maildir code which caused the STAT command to claim that
the size of the mailbox was 0 was also fixed. The code was cleaned up slightly
in a comp.lang.c sense.

Authenticators are now passed the IP address of the connected client, which
makes writing POP-before-SMTP authenticators easier.

Facility for specifying the SQL queries used by auth-mysql at runtime was
added, thanks to Mike Bremford. In addition, it is now possible to specify the
types of mailboxes used by auth-mysql.

Support for TCP Wrappers was added.

tpop3d will now remove a stale PID file on startup, rather than exiting.

Support for the MySQL PASSWORD() function as a password-hashing method was
added.

A bug in the supplied TPOP3D::AuthDriver perl module was fixed, thanks to
Steve Benson.

A `StartupItem' (Mac OS X startup script) for tpop3d was contributed by
Gerben Wierda, along with notes on using tpop3d on Mac OS X.

1.3.4

Minor changes, and addition of metadata caching for BSD mailspools; in
addition, the mailbox object was modified for efficiency reasons.

Fixed a bug which could cause child processes to fail with SIGSEGV under heavy
load.

Added an auth-perl script for authentication against an Oracle database,
contributed by Paul Makepeace.

1.3.3

Fixes for a couple of portability bugs which crept in to 1.3.2.

1.3.2

Minor changes, and an update for auth-mysql to allow passwords in formats
other than the default straight MD5 checksums. Different formats are denoted
by a prefixed token enclosed in { }. Presently supported are:

    {crypt}...          crypt(3) hash
    {crypt_md5}...      crypt_md5 hash
    {plaintext}...      plaintext password
    {md5} or no prefix  old-style simple MD5 password

This facility replaces the old apop_password field in the database; instead,
APOP users should arrange for their passwords to be recorded in the plaintext
format as above.  The new vmail-sql will work in the same way, when it is
released.

In addition, there are a couple of fixes: a small memory leak was removed, and
code was added to work around some bugs in old GNU libc versions.

1.3.1

Minor changes, and the addition of auth-perl for implementing authenticators
as fragments of perl code.

1.3.0

Incorporated autoconf support from Mark Longair, maildir support from Paul
Makepeace, a new authenticator (auth-other) which talks to external programs
and a perl library to support it, a more general scheme for selecting
mailspools and minor portability fixes.

1.2.4

Fixes for a few minor bugs, and more intelligent signal handling. tpop3d now
shuts down in a cleaner fashion on SIGTERM, and re-execs itself on receipt of
SIGHUP. In addition, a new debugging option (-DAWFUL_BACKTRACE_HACK) is
available on Linux; a few people have reported unexplained trouble and this
will allow more useful data to be collected in the event of a failure.

1.2.3

Made logging clearer; fixed a potential problem with lock files for
non-existent (empty) mail spools, and another which might lead to zombie
processes being generated under very high load. In addition, tpop3d now
checks the configuration file for the presence of unknown directives, and uses
getopt(3) for option processing, making it more like other Unix programs.

1.2.2

Minor changes; addition of a -DNO_SNIDE_COMMENTS compile-time option to please
Mark, whose user community complained about "You can hang around all day if
you like, I have better things to do".

1.2.1

Various fixes; added a patch for crypt(3) passwords in auth-mysql, and added
an option to suppress c-client metadata. CHANGES file created.
